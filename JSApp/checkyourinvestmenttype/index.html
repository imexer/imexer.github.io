<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHECK YOUR INVESTMENT STYLE</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script>Kakao.init('457888e49bbd52d9d5246812ad264e69');</script>
    <link rel="stylesheet" href="main.css">
 </head>
<body>
    <header>
         <h1 class="title">CHECK YOUR INVESTMENT TYPE</h1>
    </header>
    <main>
        <div class="links">
            <div class="hover-effect">
                <img class="ktlink" src="ktlogo.png" alt="" onclick="kakaoLink()">    
                
            </div>
            <div class="hover-effect">
                <a href="whatsapp://send?text=https://imexer.github.io/JSApp/checkyourinvestmenttype           Find out your investment type and go for it!"       data-action="share/whatsapp/share"  
                target="_blank"> <img class="walogo" class="hover-effect" src="walogo.png" alt="whatsappLink"> </a>  
            </div>

            <div class="hover-effect"> <img onclick="openModal()" src="link.png" alt="" class="link"></div>
            <div id="myModal" class="modal">
                <div class="modal-content">
                <span class="close">&times;</span>
                <input type="text" value="https://imexer.github.io/JSApp/checkyourinvestmenttype" id="linkInputField">
                <button id="copyLinkBtn">Copy Link</button>
                </div>
              </div>
        </div>
        <div class="visitorsNum">
            <p> <span id="visitorCount">0</span> people found out their investment type!</p>
        </div>
        <a href="question.html">
        <button id="start" class="button">Start</button>
        </a>
        </div>
    </main>
    <script>
        function kakaoLink() {
            Kakao.Link.sendDefault({
                objectType : 'feed',
                content : {
                    title : 'MY INVESTMENT TYPE CHECK',
                    description : 'Check your investment style!',
                    imageUrl : 'img.png',
                    link : {
                        mobileWebUrl : 'https://imexer.github.io/JSApp/investment',
                        webUrl : 'https://imexer.github.io/JSApp/investment',

                    },
                },
                social : {
                    likeCount : 0,
                    commentCount : 0,
                    sharedCount : 0,
                },
                buttons : [{
                    title : 'web',
                    link : {
                        mobileWebUrl : 'https://imexer.github.io/JSApp/investment',
                        webUrl : 'https://imexer.github.io/JSApp/investment',

                    },
                },
                {
                    title: 'app',
                    link : {
                        mobileWebUrl : 'https://imexer.github.io/JSApp/investment',
                        webUrl : 'https://imexer.github.io/JSApp/investment',

                    },
                }],
            })
        }

        const openModal = function() {
            document.getElementById("myModal").style.display = "block";
        };

        document.querySelector(".close").addEventListener("click", function() {
            document.getElementById("myModal").style.display = "none";
        });

        window.onclick = function(event) {
            if (event.target == document.getElementById("myModal")) {
                document.getElementById("myModal").style.display = "none";
            }
        }

        const copyLinkBtn = document.getElementById('copyLinkBtn');
        const linkInputField = document.getElementById('linkInputField');
        copyLinkBtn.addEventListener('click', function() {
            linkInputField.select();
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            copyLinkBtn.textContent = 'Copied!';
        });
        const firebaseConfig = {
        apiKey: "AIzaSyB8lGwJ29lpW-uZchlDVm7Xso4Krk1ZAqE",
        authDomain: "investmentmbti-a20d6.firebaseapp.com",
        databaseURL: "https://investmentmbti-a20d6-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "investmentmbti-a20d6",
        storageBucket: "investmentmbti-a20d6.appspot.com",
        messagingSenderId: "677413735365",
        appId: "1:677413735365:web:4e519ab5083c7a70ffd9ac",
        measurementId: "G-LSY3GNFZQW"
};
        const app = firebase.initializeApp(firebaseConfig);

        const dbRef = firebase.database().ref('visitorCount');

        dbRef.transaction(count => {
            return (count || 0) + 1;
        }), 
        // error => {
        //     if (error) {
        //         console.error('no', error);
        //     } else {
        //         console.log('ok');
        //     }
        // });

        dbRef.on('value', snapshot => {
            const visitorCount = snapshot.val();
            document.getElementById('visitorCount').textContent = visitorCount;
        });
    </script>
    
</body>
</html>
