<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHECK YOUR INVESTMENT STYLE</title>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script>Kakao.init('457888e49bbd52d9d5246812ad264e69');</script>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <header>
         <h1 class="title">CHECK YOUR INVESTMENT TYPE</h1>
    </header>
    <main>
        <div class="links">
            <div class="ktCon">
                <img class="ktlink" src="ktlogo.png" alt="" onclick="kakaoLink()">    
            </div>
             <img onclick="openModal()" src="link.png" alt="" class="link">
            <div id="myModal" class="modal">
                <div class="modal-content">
                <span class="close">&times;</span>
                <input type="text" value="https://imexer.github.io/JSApp/investment" id="linkInputField">
                <button id="copyLinkBtn">Copy Link</button>
                </div>
              </div>
        </div>
        
        <div class="visitorsNum"></div>
        <a href="question.html">
        <button id="start" class="button">Start</button>
        </a>
        </div>
    </main>
    <script>
function kakaoLink(){
    Kakao.Link.sendDefault({
        objectType : 'feed',
        content : {
            title : 'MY INVESTMENT TYPE CHECK',
            description : 'Check your investment style!',
            imageUrl : 'img.png',
            link : {
                mobileWebUrl : 'https://imexer.github.io/JSApp/investment',
                webUrl : 'https://imexer.github.io/JSApp/investment',

            },
        },
        social : {
            likeCount : 0,
            commentCount : 0,
            sharedCount : 0,
        },
        buttons : [{
            title : 'web',
            link : {
                mobileWebUrl : 'https://imexer.github.io/JSApp/investment',
                webUrl : 'https://imexer.github.io/JSApp/investment',

            },
        },
        {
            title: 'app',
            link : {
                mobileWebUrl : 'https://imexer.github.io/JSApp/investment',
                webUrl : 'https://imexer.github.io/JSApp/investment',

            },
        }],
    })
}

const openModal =  function() {
  document.getElementById("myModal").style.display = "block";
};

document.querySelector(".close").addEventListener("click", function() {
  document.getElementById("myModal").style.display = "none";
});

window.onclick = function(event) {
  if (event.target == document.getElementById("myModal")) {
    document.getElementById("myModal").style.display = "none";
  }
}
const copyLinkBtn = document.getElementById('copyLinkBtn');
const linkInputField = document.getElementById('linkInputField');
copyLinkBtn.addEventListener('click', function() {
  linkInputField.select();
  document.execCommand('copy');
  window.getSelection().removeAllRanges();
  copyLinkBtn.textContent = 'Copied!';
});
function getCookie(name) {
    const value = `; ${document.cookie}`;
    
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) 
    return parts.pop().split(';').shift();
};
function setCookie(name, value, days) {
    const date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    const expires = `expires=${date.toUTCString()}`;
    document.cookie = `${name}=${value};${expires};path=/`;
    console.log(document.cookie);
}
function increaseVisitorCount() {
    let count = parseInt(getCookie('visitorCount')) || 0;
    count++;
    setCookie('visitorCount', count, 1365); 
}
window.onload = function() {
    increaseVisitorCount();
    const visitorsNum = document.querySelector('.visitorsNum')
    visitorsNum.innerHTML = `${getCookie('visitorCount')} people found out their investment type!`;
};
    </script>
</body>
</html>